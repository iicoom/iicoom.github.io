import{_ as e,c as n,o as s,b2 as a}from"./chunks/framework.BRCYMVIo.js";const _=JSON.parse('{"title":"refresh token","description":"使用nest框架做服务端认证，jwt token签发，token过期后自动刷新。","frontmatter":{"title":"refresh token","head":[["meta",{"name":"description","content":"使用nest框架做服务端认证，jwt token签发，token过期后自动刷新。"}],["meta",{"name":"keywords","content":"服务端认证,jwt token,signature"}]],"layout":"doc"},"headers":[],"relativePath":"backend/refresh-token.md","filePath":"backend/refresh-token.md","lastUpdated":1708055483000}'),t={name:"backend/refresh-token.md"},r=a(`<p>&quot;Bearer token&quot;是一种用于身份验证的安全令牌。它是一种访问令牌，通常用于通过API访问受保护的资源。 Bearer token通常被包含在HTTP请求的头部中，并且在验证用户身份时起着重要作用。Bearer token的安全性取决于其保密性和有效期限。</p><p>我们签发的access_token就是上面说的安全令牌。因此，拥有最小化访问令牌风险的安全策略至关重要。一种缓解方法是创建具有短寿命的访问令牌：它们仅在以小时或天为单位定义的短时间内有效。</p><p>客户端应用程序可以通过不同方式为用户获取新的访问令牌。</p><ul><li>一旦访问令牌过期，客户端应用程序可以提示用户重新登录以获取新的访问令牌。</li><li>授权服务器可以向客户端应用程序发放刷新令牌，使其能够用新的令牌替换过期的访问令牌。</li></ul><h2 id="什么是refresh-token" tabindex="-1">什么是refresh token <a class="header-anchor" href="#什么是refresh-token" aria-label="Permalink to &quot;什么是refresh token&quot;">​</a></h2><p>根据之前提到的，出于安全考虑，access_token可能只在短时间内有效。一旦过期，客户端应用程序可以使用刷新令牌来“刷新”访问令牌。 换句话说，刷新令牌是一种凭证工具，允许客户端应用程序获取新的access_token，而无需再次要求用户重新登录。</p><p>The refresh token flow is described in the <a href="https://datatracker.ietf.org/doc/html/rfc6749" target="_blank" rel="noreferrer">OAuth 2.0 specification document</a>.</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>+--------+                                           +---------------+</span></span>
<span class="line"><span>|        |--(A)------- Authorization Grant ---------&gt;|               |</span></span>
<span class="line"><span>|        |                                           |               |</span></span>
<span class="line"><span>|        |&lt;-(B)----------- Access Token -------------|               |</span></span>
<span class="line"><span>|        |               &amp; Refresh Token             |               |</span></span>
<span class="line"><span>|        |                                           |               |</span></span>
<span class="line"><span>|        |                            +----------+   |               |</span></span>
<span class="line"><span>|        |--(C)---- Access Token ----&gt;|          |   |               |</span></span>
<span class="line"><span>|        |                            |          |   |               |</span></span>
<span class="line"><span>|        |&lt;-(D)- Protected Resource --| Resource |   | Authorization |</span></span>
<span class="line"><span>| Client |                            |  Server  |   |     Server    |</span></span>
<span class="line"><span>|        |--(E)---- Access Token ----&gt;|          |   |               |</span></span>
<span class="line"><span>|        |                            |          |   |               |</span></span>
<span class="line"><span>|        |&lt;-(F)- Invalid Token Error -|          |   |               |</span></span>
<span class="line"><span>|        |                            +----------+   |               |</span></span>
<span class="line"><span>|        |                                           |               |</span></span>
<span class="line"><span>|        |--(G)----------- Refresh Token -----------&gt;|               |</span></span>
<span class="line"><span>|        |                                           |               |</span></span>
<span class="line"><span>|        |&lt;-(H)----------- Access Token -------------|               |</span></span>
<span class="line"><span>+--------+           &amp; Optional Refresh Token        +---------------+</span></span></code></pre></div><p><a href="https://www.geeksforgeeks.org/jwt-authentication-with-refresh-tokens/" target="_blank" rel="noreferrer">https://www.geeksforgeeks.org/jwt-authentication-with-refresh-tokens/</a></p><p><a href="https://stackoverflow.com/questions/27726066/jwt-refresh-token-flow" target="_blank" rel="noreferrer">https://stackoverflow.com/questions/27726066/jwt-refresh-token-flow</a></p><h2 id="参考链接" tabindex="-1">参考链接 <a class="header-anchor" href="#参考链接" aria-label="Permalink to &quot;参考链接&quot;">​</a></h2><p><a href="https://auth0.com/blog/refresh-tokens-what-are-they-and-when-to-use-them/" target="_blank" rel="noreferrer">refresh token</a></p>`,12),p=[r];function o(l,c,i,h,k,f){return s(),n("div",null,p)}const u=e(t,[["render",o]]);export{_ as __pageData,u as default};
