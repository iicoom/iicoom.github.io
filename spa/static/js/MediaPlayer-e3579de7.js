import{d as x,r as d,k as F,o as C,z as v,D as m,S as I,E as o,X as g,Y as y,aq as w,a5 as T,J as b,F as V,G,f as i,B as p,C as k}from"./element-plus-40d2da59.js";import{f as J,_ as H}from"./index-b38a4740.js";import{v as N,A as W}from"./AudioPlayer-d0bdb6d3.js";import"./echarts-71ab4440.js";const z={class:"video-player"},A=["src"],O={class:"control",ref:"control"},R={class:"loader"},X={class:"loader pause"},Y={class:"loader"},K={class:"time"},Q={class:"progress",ref:"progress"},U={class:"total-time"},Z=x({__name:"SelfPlayer",props:{src:{default:"https://live-s3m.mediav.com/nativevideo/862f536173e48f897b2d772f863959c5-bit_cloud768.mp4"},theme:{default:()=>"red"}},setup(S){const c=S,u=d(!0),f=d(!0),_=d(!0),n=d(!0),e=d(!1),l=d(!1),h=d(!1),M="video"+Math.random().toString().slice(2,6);let r=null;const B=d(""),a=F({displayTime:"00:00",totalTime:"00:00",progress:{width:0,current:10}});C(()=>{E()});function E(){var t;J("--player-theme").value=c.theme,r=document.querySelector(`#${M}`),r.addEventListener("canplay",function(){r.videoWidth,r.videoHeight,a.totalTime=P(r.duration)});const s=document.querySelector(".progress");s&&(a.progress.width=Math.round(s.getBoundingClientRect().width)),(t=document.querySelector(".control"))==null||t.addEventListener("mousemove",function(){setTimeout(()=>{},2e3)})}function $(){l.value||(h.value=!1,e.value?(r.pause(),e.value=!1):(r.play(),e.value=!0),r.addEventListener("timeupdate",j),r.addEventListener("ended",()=>{e.value=!1,h.value=!0,f.value=!0,B.value="00:00",a.progress.current=10,r.currentTime=0}))}const L=s=>(s=Math.floor(s),s<10?"0"+s:s+""),P=s=>{let t=0;return t=Math.floor(s/60),s=s-t*60,L(t)+":"+L(s)};function j(){const s=r.currentTime/r.duration;a.progress.width*s>10&&(a.progress.current=Math.round(a.progress.width*s)),a.displayTime=P(r.currentTime)}function q(){e.value=!1,l.value=!0}function D(){console.log("点击全屏..."),n.value?(n.value=!1,r.webkitCancelFullScreen()):(n.value=!0,r.webkitRequestFullScreen())}return(s,t)=>(v(),m("div",z,[u.value?(v(),m("video",{key:0,"webkit-playsinline":"true",playsinline:"true","x-webkit-airplay":"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-orientation":"portrait",preload:"auto",src:s.src,id:M,onWaiting:q}," 您的浏览器不支持HTML5 ",40,A)):I("",!0),o("div",O,[g(o("div",{class:"play",onClick:w($,["stop"])},[g(o("div",R,t[3]||(t[3]=[o("i",{class:"iconfont",innerHTML:""},null,-1)]),512),[[y,!e.value]]),g(o("div",X,t[4]||(t[4]=[o("i",{class:"iconfont",innerHTML:""},null,-1)]),512),[[y,e.value]]),g(o("div",Y,t[5]||(t[5]=[o("div",{class:"loader-inner ball-clip-rotate"},[o("div")],-1)]),512),[[y,l.value]])],512),[[y,f.value]]),o("div",{class:"control-bar",style:T({visibility:_.value?"visible":"hidden"})},[o("span",K,b(a.displayTime),1),o("span",Q,[o("span",{class:"progress-btn ignore",style:T({transform:`translate3d(${a.progress.current}px, 15px, 0)`,backgroundColor:s.theme})},null,4),o("span",{class:"progress-loaded",style:T({width:`${a.progress.current-10}px`,backgroundColor:s.theme})},null,4),o("span",{class:"progress-move",onTouchmove:t[0]||(t[0]=w(()=>{},["stop","prevent"])),onTouchstart:t[1]||(t[1]=w(()=>{},["stop"])),onTouchend:t[2]||(t[2]=w(()=>{},["stop"]))},null,32)],512),o("span",U,b(a.totalTime),1),o("span",{class:"full-screen",onClick:D},t[6]||(t[6]=[o("i",{class:"iconfont",innerHTML:""},null,-1)]))],4)],512)]))}});const ee=H(Z,[["__scopeId","data-v-99adb489"]]),te={ref:"scrollComponent",style:{height:"300px","overflow-y":"scroll"},id:"wrap"},oe=x({__name:"InfiniteScroll",setup(S){let c=["Matt Maribojoc","Lebron James","Bill Gates","Childish Gambino"];const u=n=>{let e=[];for(var l=0;l<n;l++)e.push({author:c[l%c.length],content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do."});return e},f=d(u(10)),_=()=>{let n=u(10);console.log(n),f.value.push(...n)};return C(()=>{var n;(n=document.querySelector("#wrap"))==null||n.addEventListener("scroll",e=>{console.log(e.target.scrollTop,e.target.scrollHeight-e.target.offsetHeight),e.target.scrollHeight-e.target.offsetHeight-e.target.scrollTop<5&&_()})}),(n,e)=>(v(),m("div",te,[(v(!0),m(V,null,G(f.value,(l,h)=>(v(),m("div",{class:"post",key:h},[o("h2",null,b(l.author),1),o("p",null,b(l.content),1)]))),128))],512))}});const se=H(oe,[["__scopeId","data-v-d0f5b117"]]),ne={class:"page-container"},re={style:{height:"293px"}},ce=x({__name:"MediaPlayer",setup(S){const c=d(),u=d();return C(()=>{u.value.init("https://live-s3m.mediav.com/nativevideo/862f536173e48f897b2d772f863959c5-bit_cloud768.mp4"),c.value.init("https://m701.music.126.net/20230909200300/e660423d3875fdfc859901a7f7f24c5a/jdyyaac/obj/w5rDlsOJwrLDjj7CmsOj/12249341712/26bf/6f0b/c8a6/abe944544908357e872d05619710d76f.m4a")}),(f,_)=>{const n=k("el-card"),e=k("el-col"),l=k("el-row");return v(),m("div",ne,[i(l,{gutter:12},{default:p(()=>[i(e,{span:12},{default:p(()=>[i(n,{shadow:"hover"},{default:p(()=>[o("div",re,[i(N,{ref_key:"vp",ref:u},null,512)])]),_:1})]),_:1}),i(e,{span:12},{default:p(()=>[i(n,{shadow:"hover"},{default:p(()=>[i(ee)]),_:1})]),_:1}),i(e,{span:12},{default:p(()=>[i(n,{shadow:"hover",style:{"margin-top":"10px"}},{default:p(()=>[i(W,{ref_key:"ap",ref:c},null,512)]),_:1})]),_:1})]),_:1}),i(se)])}}});export{ce as default};
