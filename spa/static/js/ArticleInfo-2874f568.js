import{$ as y,u as G}from"./index-a31efbef.js";import{d as I,o as L,r as M,k as V,z as f,D as _,f as e,B as o,v as n,a7 as N,C as s,L as w,F as x,G as k,E as j}from"./element-plus-b1d7f0ee.js";import"./echarts-71ab4440.js";const z={class:"page-container"},S={style:{height:"calc(100vh - 150px)"}},Q=I({__name:"ArticleInfo",setup(h){const C=[{label:"后端",value:"后端"},{label:"前端",value:"前端"},{label:"移动端",value:"移动端"},{label:"数据库",value:"数据库"},{label:"算法",value:"算法"},{label:"架构",value:"架构"},{label:"其他",value:"其他"}],R=["Vue","React","Node.js","Golang","MySQL","MongoDB"],U=G();L(()=>{const r=parseInt(U.params.id.toString());r&&B(r)});const g=M();let t=V({id:"",title:"",category:"",tags:[],content:"",abstract:""});const A=V({title:[{required:!1,message:"请输入"}],content:[{required:!0,message:"请输入"}]});async function B(r){const l={id:r},c=await y.sendRequest("GetArticleInfo",l);Object.keys(c.info).forEach(u=>{t[u]=c.info[u]}),t.tags!==""&&(t.tags=t.tags.split(","))}async function F(){var r;(r=g.value)==null||r.validate(async(l,c)=>{if(l){let u="CreateArticle";t.id&&(u="UpdateArticle");const d={...t};d.tags=d.tags.join(","),await y.sendRequest(u,d)&&N({message:"操作成功",type:"success"})}})}return(r,l)=>{const c=s("el-button"),u=s("el-tag"),d=s("el-input"),i=s("el-form-item"),p=s("el-col"),m=s("el-row"),b=s("el-option"),v=s("el-select"),q=s("mavon-editor"),E=s("el-form");return f(),_("div",z,[e(c,{type:"primary",size:"small",onClick:F},{default:o(()=>l[5]||(l[5]=[w("保存")])),_:1}),e(u,{closable:"",style:{"margin-left":"20px"}},{default:o(()=>l[6]||(l[6]=[w("生活不止眼前的苟且，还有诗和远方的田野")])),_:1}),e(E,{model:n(t),ref_key:"articleFormRef",ref:g,style:{"margin-top":"20px"},rules:A},{default:o(()=>[e(m,null,{default:o(()=>[e(p,null,{default:o(()=>[e(i,{label:"标题",prop:"title"},{default:o(()=>[e(d,{placeholder:"",modelValue:n(t).title,"onUpdate:modelValue":l[0]||(l[0]=a=>n(t).title=a),clearable:"",style:{width:"350px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:o(()=>[e(p,{span:8},{default:o(()=>[e(i,{label:"分类",prop:"category"},{default:o(()=>[e(v,{modelValue:n(t).category,"onUpdate:modelValue":l[1]||(l[1]=a=>n(t).category=a),clearable:"","allow-create":"",placeholder:""},{default:o(()=>[(f(),_(x,null,k(C,a=>e(b,{key:a.type,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{span:8},{default:o(()=>[e(i,{label:"标签",prop:"tags"},{default:o(()=>[e(v,{modelValue:n(t).tags,"onUpdate:modelValue":l[2]||(l[2]=a=>n(t).tags=a),clearable:"","allow-create":"",multiple:"",placeholder:"",style:{width:"100%"}},{default:o(()=>[(f(),_(x,null,k(R,a=>e(b,{label:a,value:a},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:o(()=>[e(p,{span:16},{default:o(()=>[e(i,{label:"摘要",prop:"abstract"},{default:o(()=>[e(d,{placeholder:"",modelValue:n(t).abstract,"onUpdate:modelValue":l[3]||(l[3]=a=>n(t).abstract=a),clearable:"",autosize:"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),j("div",S,[e(q,{style:{height:"100%"},modelValue:n(t).content,"onUpdate:modelValue":l[4]||(l[4]=a=>n(t).content=a)},null,8,["modelValue"])])]),_:1},8,["model","rules"])])}}});export{Q as default};
