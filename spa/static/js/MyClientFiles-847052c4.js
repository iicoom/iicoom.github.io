import{G as R,$ as g,a as me,_ as ce}from"./index-b38a4740.js";import{G as fe}from"./index-200d4584.js";import{k as x,d as _e,r as n,o as ve,z as y,D as $,E as a,f as l,B as o,v as r,ap as H,a7 as U,C as i,al as ge,L as d,J as w,F as ye,G as we,X as xe,A as Ve}from"./element-plus-40d2da59.js";import"./echarts-71ab4440.js";const ke=x([{label:"client",prop:"client",width:"100px",align:"center"},{label:"备注",prop:"mark",tdSlot:"mark",width:"150px",showTooltip:!1},{label:"下载地址",prop:"config_dir",tdSlot:"config_dir",width:"150px",align:"center"},{label:"状态",prop:"status",tdSlot:"status",width:"150px",align:"center"},{label:"倒计时",prop:"cutdown_time",tdSlot:"cutdown_time",align:"center"},{label:"到期时间",prop:"valid_time",tdSlot:"valid_time",align:"center"},{label:"操作",prop:"operate",tdSlot:"operate",fixed:"right",width:"150px",align:"center"}]);x([{field:"client",type:"input",label:"用户名"}]);const be={class:"page-container"},Ce={class:"btn-group"},De={style:{"text-align":"center"}},Te={class:"statistic-card"},Be={class:"statistic-card"},Se={class:"statistic-card"},Me={style:{"text-align":"center"}},Re={class:"dialog-footer"},$e=_e({__name:"MyClientFiles",setup(Ue){const F=n(!1),P=n(),O=n(),j=n(),J=n(),f=n();ve(()=>{});const G=n([]),V=n(!1);async function k(){V.value=!0;const s={page:f.value.pagination.page,size:f.value.pagination.size},e=await g.sendRequest("GetMyClientList",s);G.value=e.list,f.value.pagination.total=e.total,V.value=!1}async function X(){H.prompt("请输入密钥文件名称","Tip",{confirmButtonText:"确认",cancelButtonText:"取消",inputPattern:/[a-zA-Z0-9]/,inputErrorMessage:"不能为空"}).then(async({value:s})=>{const e={clientName:s};await g.sendRequest("CreateClientByAdmin",e)&&(U.success("操作成功"),await k())}).catch(()=>{})}me();const z=n(!1),b=n(!1);function Z(){b.value=!0}const I=R.getPlatform(),K=n(0),Q=n(""),C=n(!1),W=()=>{C.value=!0},m=n(!1),Y=n("VIP续期"),q=n();let u=x({});const h=x({valid_time:[{required:!0,message:"请选择"}]});function ee(s){m.value=!0,u=s}function D(){m.value=!1}const T=n(!1);function te(){q.value.validate(async s=>{s&&(T.value=!0,await g.sendRequest("UpdateClientValidTime",u)&&(U({message:"操作成功",type:"success"}),D(),m.value=!1,T.value=!1))})}function le(s){H.confirm(`确定要删除【${s.id}】？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const e={id:s.id};await g.sendRequest("DeleteOrder",e)&&(U({type:"success",message:"操作成功"}),k())}).catch(()=>{})}function oe(s){R.copyTextToClipboard(s.mark)}return(s,e)=>{const p=i("el-button"),ae=i("el-badge"),E=i("el-link"),ne=i("el-countdown"),_=i("el-tour-step"),ie=i("el-tour"),v=i("el-dialog"),B=i("el-statistic"),S=i("el-col"),se=i("el-row"),re=i("el-text"),L=i("el-input"),M=i("el-form-item"),de=i("el-date-picker"),ue=i("el-form"),pe=ge("loading");return y(),$("div",be,[a("div",Ce,[l(p,{type:"primary",onClick:X,ref_key:"ref1",ref:P},{default:o(()=>e[8]||(e[8]=[d("试用")])),_:1},512),l(ae,{value:K.value,max:99},{default:o(()=>[l(p,{type:"primary",onClick:W,style:{"margin-left":"10px"}},{default:o(()=>e[9]||(e[9]=[d("在线用户")])),_:1})]),_:1},8,["value"])]),l(fe,{ref_key:"gtRef",ref:f,loading:V.value,columns:r(ke),tableData:G.value,onPageChange:k},{mark:o(t=>[l(E,{type:"primary",onClick:c=>oe(t.row)},{default:o(()=>[d(w(t.row.mark),1)]),_:2},1032,["onClick"])]),config_dir:o(t=>[l(E,{href:t.row.config_dir,type:"primary",target:"_blank"},{default:o(()=>e[10]||(e[10]=[d("下载配置文件")])),_:2},1032,["href"])]),status:o(t=>[d(w(new Date(t.row.valid_time).getTime()>Date.now()?"正常":"已过期"),1)]),cutdown_time:o(t=>[l(ne,{title:"Remaining VIP time",format:"DD [天] HH:mm:ss",value:new Date(t.row.valid_time)},null,8,["value"])]),valid_time:o(t=>[d(w(r(R).formatTime(t.row.valid_time)),1)]),operate:o(t=>[l(p,{type:"primary",size:"small",onClick:c=>ee(t.row)},{default:o(()=>e[11]||(e[11]=[d(" 续期 ")])),_:2},1032,["onClick"]),l(p,{type:"danger",size:"small",onClick:c=>le(t.row)},{default:o(()=>e[12]||(e[12]=[d("删除")])),_:2},1032,["onClick"])]),_:1},8,["loading","columns","tableData"]),l(ie,{modelValue:F.value,"onUpdate:modelValue":e[0]||(e[0]=t=>F.value=t)},{default:o(()=>{var t,c,N,A;return[l(_,{target:(t=P.value)==null?void 0:t.$el,title:"点击试用"},{default:o(()=>e[13]||(e[13]=[a("ol",null,[a("li",null,"建议先在 （我的代理-公共资源 菜单中下载vpn客户端软件，再点击【试用】按钮，生成一次试用机会（包含20分钟的体验时间）"),a("li",null,"从生成的数据 下载地址 下载openvpn客户端配置文件")],-1)])),_:1},8,["target"]),l(_,{target:(c=O.value)==null?void 0:c.$el,title:"连接代理",description:"如果你还不是很了解open-vpn的使用方式，可以通过这里了解"},null,8,["target"]),l(_,{target:(N=j.value)==null?void 0:N.$el,title:"升级为VIP",description:"试用后感觉服务还不错，可以在这里升级VIP"},null,8,["target"]),l(_,{target:(A=J.value)==null?void 0:A.$el,title:"联系客服",description:"如果您有问题可联系客服"},null,8,["target"])]}),_:1},8,["modelValue"]),l(v,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=t=>b.value=t),title:"联系客服",width:r(I)==="pc"?"500px":"80%",center:""},{default:o(()=>e[14]||(e[14]=[a("div",{style:{"text-align":"center"}},[a("img",{src:"https://img-blog.csdnimg.cn/direct/7d48b6e20427412daed6d70504afac3e.jpeg#pic_center",referrerpolicy:"no-referrer",style:{width:"60%"}})],-1)])),_:1},8,["modelValue","width"]),l(v,{modelValue:z.value,"onUpdate:modelValue":e[2]||(e[2]=t=>z.value=t),title:"升级为VIP",width:r(I)==="pc"?"500px":"80%",center:""},{default:o(()=>[a("div",De,[l(se,{gutter:16},{default:o(()=>[l(S,{span:8},{default:o(()=>[a("div",Te,[l(B,{value:15,prefix:"¥"},{title:o(()=>e[15]||(e[15]=[a("div",{style:{display:"inline-flex","align-items":"center"}}," 1个月 ",-1)])),_:1}),e[16]||(e[16]=a("div",{class:"statistic-footer"},[a("div",{class:"footer-item"},[a("span",null,"原价0.83折")])],-1))])]),_:1}),l(S,{span:8},{default:o(()=>[a("div",Be,[l(B,{value:39,prefix:"¥"},{title:o(()=>e[17]||(e[17]=[a("div",{style:{display:"inline-flex","align-items":"center"}}," 3个月 ",-1)])),_:1}),e[18]||(e[18]=a("div",{class:"statistic-footer"},[a("div",{class:"footer-item"},[a("span",null,"原价0.72折")])],-1))])]),_:1}),l(S,{span:8},{default:o(()=>[a("div",Se,[l(B,{value:60,prefix:"¥"},{title:o(()=>e[19]||(e[19]=[a("div",{style:{display:"inline-flex","align-items":"center"}}," 6个月 ",-1)])),_:1}),e[20]||(e[20]=a("div",{class:"statistic-footer"},[a("div",{class:"footer-item"},[a("span",null,"原价0.55折")])],-1))])]),_:1})]),_:1}),l(re,{type:"success",tag:"b",class:"contact",onClick:Z},{default:o(()=>e[21]||(e[21]=[d("请添加客服购买")])),_:1})])]),_:1},8,["modelValue","width"]),l(v,{modelValue:C.value,"onUpdate:modelValue":e[3]||(e[3]=t=>C.value=t),title:"在线用户",center:""},{default:o(()=>[a("div",Me,[(y(!0),$(ye,null,we(Q.value,t=>(y(),$("p",null,w(t),1))),256))])]),_:1},8,["modelValue"]),l(v,{modelValue:m.value,"onUpdate:modelValue":e[7]||(e[7]=t=>m.value=t),title:Y.value,"close-on-click-modal":!1,onClose:D,center:"",width:"500px"},{footer:o(()=>[a("span",Re,[l(p,{onClick:D},{default:o(()=>e[22]||(e[22]=[d("取消")])),_:1}),l(p,{type:"primary",onClick:te},{default:o(()=>e[23]||(e[23]=[d(" 确认 ")])),_:1})])]),default:o(()=>[xe((y(),Ve(ue,{model:r(u),ref_key:"ruleFormRef",ref:q,"label-width":"120px",rules:h},{default:o(()=>[l(M,{label:"client",prop:"client"},{default:o(()=>[l(L,{modelValue:r(u).client,"onUpdate:modelValue":e[4]||(e[4]=t=>r(u).client=t),placeholder:"",style:{width:"250px"}},null,8,["modelValue"])]),_:1}),l(M,{label:"备注",prop:"mark"},{default:o(()=>[l(L,{modelValue:r(u).mark,"onUpdate:modelValue":e[5]||(e[5]=t=>r(u).mark=t),placeholder:"",style:{width:"250px"}},null,8,["modelValue"])]),_:1}),l(M,{label:"到期时间",prop:"valid_time"},{default:o(()=>[l(de,{modelValue:r(u).valid_time,"onUpdate:modelValue":e[6]||(e[6]=t=>r(u).valid_time=t),type:"datetime",placeholder:"Select date and time",style:{width:"250px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[pe,T.value]])]),_:1},8,["modelValue","title"])])}}});const Ie=ce($e,[["__scopeId","data-v-8752da18"]]);export{Ie as default};
