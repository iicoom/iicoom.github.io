import{g as Ue,d as Y,k as He,r as k,c as F,y as ut,w as Ke,q as Z,o as Ye,f as o,aK as Me,L as $,aP as dt,X as be,Y as Je,z as S,D as E,G as Xe,F as Be,C as Qe,al as Ze,v as m,J as ee,E as V,a as ft,A as Pe,S as X,B as P}from"./element-plus-40d2da59.js";import{g as et,_ as tt,G as le,$ as oe,n as gt,a as vt,q as mt}from"./index-842d9a02.js";import{l as ht}from"./index-d9998155.js";import{T as bt}from"./Tutorial-fad10d63.js";import{$ as yt,a0 as _t,V as nt,T as Ct,o as kt,c as ie,n as te,i as re,s as ye,e as at,d as xt,a as lt,f as Ae,b as ot,a1 as It,C as st,a2 as wt,S as H,Q as $e,a3 as St,G as pt,F as Se,I as K,a4 as Tt,w as ce,t as Ee,N as Vt,A as Mt,a5 as Bt,J as ze,D as Ne,H as Et,u as Lt,W as Rt,_ as Pt,l as At,a6 as $t}from"./index-a22f7fa8.js";import{c as zt,C as Nt,a as Dt}from"./index-3871dfeb.js";import{u as Ot,s as De,N as Oe}from"./index-996c9a3b.js";import{r as qt,u as Wt,B as Q}from"./index-74c14a4e.js";let jt=0;function Ft(){const e=Ue(),{name:a="unknown"}=(e==null?void 0:e.type)||{};return`${a}-${++jt}`}function rt(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function Gt(e,a){if(rt(e)){if(a.required)return!1;if(a.validateEmpty===!1)return!0}return!(a.pattern&&!a.pattern.test(String(e)))}function Ut(e,a){return new Promise(l=>{const s=a.validator(e,a);if(Ct(s)){s.then(l);return}l(s)})}function qe(e,a){const{message:l}=a;return kt(l)?l(e,a):l||""}function Ht({target:e}){e.composing=!0}function We({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Kt(e,a){const l=yt();e.style.height="auto";let s=e.scrollHeight;if(nt(a)){const{maxHeight:r,minHeight:u}=a;r!==void 0&&(s=Math.min(s,r)),u!==void 0&&(s=Math.max(s,u))}s&&(e.style.height=`${s}px`,_t(l))}function Yt(e,a){return e==="number"&&(e="text",a??(a="decimal")),e==="digit"&&(e="tel",a??(a="numeric")),{type:e,inputmode:a}}function W(e){return[...e].length}function pe(e,a){return[...e].slice(0,a).join("")}const[Jt,A]=ie("field"),Xt={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:te,max:Number,min:Number,formatter:Function,clearIcon:re("clear"),modelValue:ye(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:re("focus"),formatTrigger:re("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},Qt=at({},zt,Xt,{rows:te,type:re("text"),rules:Array,autosize:[Boolean,Object],labelWidth:te,labelClass:xt,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Zt=Y({name:Jt,props:Qt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:a,slots:l}){const s=Ft(),r=He({status:"unvalidated",focused:!1,validateMessage:""}),u=k(),h=k(),b=k(),{parent:d}=lt(wt),v=()=>{var t;return String((t=e.modelValue)!=null?t:"")},g=t=>{if(H(e[t]))return e[t];if(d&&H(d.props[t]))return d.props[t]},x=F(()=>{const t=g("readonly");if(e.clearable&&!t){const c=v()!=="",f=e.clearTrigger==="always"||e.clearTrigger==="focus"&&r.focused;return c&&f}return!1}),M=F(()=>b.value&&l.input?b.value():e.modelValue),L=F(()=>{var t;const c=g("required");return c==="auto"?(t=e.rules)==null?void 0:t.some(f=>f.required):c}),I=t=>t.reduce((c,f)=>c.then(()=>{if(r.status==="failed")return;let{value:_}=M;if(f.formatter&&(_=f.formatter(_,f)),!Gt(_,f)){r.status="failed",r.validateMessage=qe(_,f);return}if(f.validator)return rt(_)&&f.validateEmpty===!1?void 0:Ut(_,f).then(w=>{w&&typeof w=="string"?(r.status="failed",r.validateMessage=w):w===!1&&(r.status="failed",r.validateMessage=qe(_,f))})}),Promise.resolve()),C=()=>{r.status="unvalidated",r.validateMessage=""},y=()=>a("endValidate",{status:r.status,message:r.validateMessage}),B=(t=e.rules)=>new Promise(c=>{C(),t?(a("startValidate"),I(t).then(()=>{r.status==="failed"?(c({name:e.name,message:r.validateMessage}),y()):(r.status="passed",c(),y())})):c()}),p=t=>{if(d&&e.rules){const{validateTrigger:c}=d.props,f=$e(c).includes(t),_=e.rules.filter(w=>w.trigger?$e(w.trigger).includes(t):f);_.length&&B(_)}},J=t=>{var c;const{maxlength:f}=e;if(H(f)&&W(t)>+f){const _=v();if(_&&W(_)===+f)return _;const w=(c=u.value)==null?void 0:c.selectionEnd;if(r.focused&&w){const G=[...t],U=G.length-+f;return G.splice(w-U,U),G.join("")}return pe(t,+f)}return t},z=(t,c="onChange")=>{var f,_;const w=t;t=J(t);const G=W(w)-W(t);if(e.type==="number"||e.type==="digit"){const O=e.type==="number";t=St(t,O,O),c==="onBlur"&&t!==""&&(e.min!==void 0||e.max!==void 0)&&(t=pt(+t,(f=e.min)!=null?f:-1/0,(_=e.max)!=null?_:1/0).toString())}let U=0;if(e.formatter&&c===e.formatTrigger){const{formatter:O,maxlength:q}=e;if(t=O(t),H(q)&&W(t)>+q&&(t=pe(t,+q)),u.value&&r.focused){const{selectionEnd:he}=u.value,Re=pe(w,he);U=W(O(Re))-W(Re)}}if(u.value&&u.value.value!==t)if(r.focused){let{selectionStart:O,selectionEnd:q}=u.value;if(u.value.value=t,H(O)&&H(q)){const he=W(t);G?(O-=G,q-=G):U&&(O+=U,q+=U),u.value.setSelectionRange(Math.min(O,he),Math.min(q,he))}}else u.value.value=t;t!==e.modelValue&&a("update:modelValue",t)},N=t=>{t.target.composing||z(t.target.value)},ne=()=>{var t;return(t=u.value)==null?void 0:t.blur()},D=()=>{var t;return(t=u.value)==null?void 0:t.focus()},j=()=>{const t=u.value;e.type==="textarea"&&e.autosize&&t&&Kt(t,e.autosize)},_e=t=>{r.focused=!0,a("focus",t),Z(j),g("readonly")&&ne()},Ce=t=>{r.focused=!1,z(v(),"onBlur"),a("blur",t),!g("readonly")&&(p("onBlur"),Z(j),Tt())},ue=t=>a("clickInput",t),ke=t=>a("clickLeftIcon",t),xe=t=>a("clickRightIcon",t),Ie=t=>{Se(t),a("update:modelValue",""),a("clear",t)},de=F(()=>{if(typeof e.error=="boolean")return e.error;if(d&&d.props.showError&&r.status==="failed")return!0}),i=F(()=>{const t=g("labelWidth"),c=g("labelAlign");if(t&&c!=="top")return{width:Ae(t)}}),n=t=>{t.keyCode===13&&(!(d&&d.props.submitOnEnter)&&e.type!=="textarea"&&Se(t),e.type==="search"&&ne()),a("keypress",t)},R=()=>e.id||`${s}-input`,fe=()=>r.status,ae=()=>{const t=A("control",[g("inputAlign"),{error:de.value,custom:!!l.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(l.input)return o("div",{class:t,onClick:ue},[l.input()]);const c={id:R(),ref:u,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:g("disabled"),readonly:g("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${s}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:Ce,onFocus:_e,onInput:N,onClick:ue,onChange:We,onKeypress:n,onCompositionend:We,onCompositionstart:Ht};return e.type==="textarea"?o("textarea",Me(c,{inputmode:e.inputmode}),null):o("input",Me(Yt(e.type,e.inputmode),c),null)},ge=()=>{const t=l["left-icon"];if(e.leftIcon||t)return o("div",{class:A("left-icon"),onClick:ke},[t?t():o(K,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},T=()=>{const t=l["right-icon"];if(e.rightIcon||t)return o("div",{class:A("right-icon"),onClick:xe},[t?t():o(K,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},we=()=>{if(e.showWordLimit&&e.maxlength){const t=W(v());return o("div",{class:A("word-limit")},[o("span",{class:A("word-num")},[t]),$("/"),e.maxlength])}},ve=()=>{if(d&&d.props.showErrorMessage===!1)return;const t=e.errorMessage||r.validateMessage;if(t){const c=l["error-message"],f=g("errorMessageAlign");return o("div",{class:A("error-message",f)},[c?c({message:t}):t])}},me=()=>{const t=g("labelWidth"),c=g("labelAlign"),f=g("colon")?":":"";if(l.label)return[l.label(),f];if(e.label)return o("label",{id:`${s}-label`,for:l.input?void 0:R(),"data-allow-mismatch":"attribute",onClick:_=>{Se(_),D()},style:c==="top"&&t?{width:Ae(t)}:void 0},[e.label+f])},Le=()=>[o("div",{class:A("body")},[ae(),x.value&&o(K,{ref:h,name:e.clearIcon,class:A("clear")},null),T(),l.button&&o("div",{class:A("button")},[l.button()])]),we(),ve()];return ot({blur:ne,focus:D,validate:B,formValue:M,resetValidation:C,getValidationStatus:fe}),ut(It,{customValue:b,resetValidation:C,validateWithTrigger:p}),Ke(()=>e.modelValue,()=>{z(v()),C(),p("onChange"),Z(j)}),Ye(()=>{z(v(),e.formatTrigger),Z(j)}),st("touchstart",Ie,{target:F(()=>{var t;return(t=h.value)==null?void 0:t.$el})}),()=>{const t=g("disabled"),c=g("labelAlign"),f=ge(),_=()=>{const w=me();return c==="top"?[f,w].filter(Boolean):w||[]};return o(Nt,{size:e.size,class:A({error:de.value,disabled:t,[`label-${c}`]:c}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:i.value,valueClass:A("value"),titleClass:[A("label",[c,{required:L.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:f&&c!=="top"?()=>f:null,title:_,value:Le,extra:l.extra})}}});const je=ce(Zt),[en,Fe]=ie("tag"),tn={size:String,mark:Boolean,show:Ee,type:re("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var nn=Y({name:en,props:tn,emits:["close"],setup(e,{slots:a,emit:l}){const s=h=>{h.stopPropagation(),l("close",h)},r=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},u=()=>{var h;const{type:b,mark:d,plain:v,round:g,size:x,closeable:M}=e,L={mark:d,plain:v,round:g};x&&(L[x]=x);const I=M&&o(K,{name:"cross",class:[Fe("close"),Vt],onClick:s},null);return o("span",{style:r(),class:Fe([L,b])},[(h=a.default)==null?void 0:h.call(a),I])};return()=>o(dt,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?u():null]})}});const an=ce(nn),[ln,se]=ie("notice-bar"),on={text:String,mode:String,color:String,delay:ye(1),speed:ye(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var sn=Y({name:ln,props:on,emits:["close","replay"],setup(e,{emit:a,slots:l}){let s=0,r=0,u;const h=k(),b=k(),d=He({show:!0,offset:0,duration:0}),v=()=>{if(l["left-icon"])return l["left-icon"]();if(e.leftIcon)return o(K,{class:se("left-icon"),name:e.leftIcon},null)},g=()=>{if(e.mode==="closeable")return"cross";if(e.mode==="link")return"arrow"},x=y=>{e.mode==="closeable"&&(d.show=!1,a("close",y))},M=()=>{if(l["right-icon"])return l["right-icon"]();const y=g();if(y)return o(K,{name:y,class:se("right-icon"),onClick:x},null)},L=()=>{d.offset=s,d.duration=0,Et(()=>{Ne(()=>{d.offset=-r,d.duration=(r+s)/+e.speed,a("replay")})})},I=()=>{const y=e.scrollable===!1&&!e.wrapable,B={transform:d.offset?`translateX(${d.offset}px)`:"",transitionDuration:`${d.duration}s`};return o("div",{ref:h,role:"marquee",class:se("wrap")},[o("div",{ref:b,style:B,class:[se("content"),{"van-ellipsis":y}],onTransitionend:L},[l.default?l.default():e.text])])},C=()=>{const{delay:y,speed:B,scrollable:p}=e,J=H(y)?+y*1e3:0;s=0,r=0,d.offset=0,d.duration=0,clearTimeout(u),u=setTimeout(()=>{if(!h.value||!b.value||p===!1)return;const z=ze(h).width,N=ze(b).width;(p||N>z)&&Ne(()=>{s=z,r=N,d.offset=-r,d.duration=r/+B})},J)};return Mt(C),Bt(C),st("pageshow",C),ot({reset:C}),Ke(()=>[e.text,e.scrollable],C),()=>{const{color:y,wrapable:B,background:p}=e;return be(o("div",{role:"alert",class:se({wrapable:B}),style:{color:y,background:p}},[v(),I(),M()]),[[Je,d.show]])}}});const rn=ce(sn),[it,Ge]=ie("tabbar"),cn={route:Boolean,fixed:Ee,border:Ee,zIndex:te,placeholder:Boolean,activeColor:String,beforeChange:Function,inactiveColor:String,modelValue:ye(0),safeAreaInsetBottom:{type:Boolean,default:null}},ct=Symbol(it);var un=Y({name:it,props:cn,emits:["change","update:modelValue"],setup(e,{emit:a,slots:l}){const s=k(),{linkChildren:r}=Lt(ct),u=Ot(s,Ge),h=()=>{var v;return(v=e.safeAreaInsetBottom)!=null?v:e.fixed},b=()=>{var v;const{fixed:g,zIndex:x,border:M}=e;return o("div",{ref:s,role:"tablist",style:Rt(x),class:[Ge({fixed:g}),{[Pt]:M,"van-safe-area-bottom":h()}]},[(v=l.default)==null?void 0:v.call(l)])};return r({props:e,setActive:(v,g)=>{At(e.beforeChange,{args:[v],done(){a("update:modelValue",v),a("change",v),g()}})}}),()=>e.fixed&&e.placeholder?u(b):b()}});const dn=ce(un),[fn,Te]=ie("tabbar-item"),gn=at({},qt,{dot:Boolean,icon:String,name:te,badge:te,badgeProps:Object,iconPrefix:String});var vn=Y({name:fn,props:gn,emits:["click"],setup(e,{emit:a,slots:l}){const s=Wt(),r=Ue().proxy,{parent:u,index:h}=lt(ct);if(!u)return;const b=F(()=>{var g;const{route:x,modelValue:M}=u.props;if(x&&"$route"in r){const{$route:L}=r,{to:I}=e,C=nt(I)?I:{path:I};return!!L.matched.find(y=>{const B="path"in C&&C.path===y.path,p="name"in C&&C.name===y.name;return B||p})}return((g=e.name)!=null?g:h.value)===M}),d=g=>{var x;b.value||u.setActive((x=e.name)!=null?x:h.value,s),a("click",g)},v=()=>{if(l.icon)return l.icon({active:b.value});if(e.icon)return o(K,{name:e.icon,classPrefix:e.iconPrefix},null)};return()=>{var g;const{dot:x,badge:M}=e,{activeColor:L,inactiveColor:I}=u.props,C=b.value?L:I;return o("div",{role:"tab",class:Te({active:b.value}),style:{color:C},tabindex:0,"aria-selected":b.value,onClick:d},[o($t,Me({dot:x,class:Te("icon"),content:M},e.badgeProps),{default:v}),o("div",{class:Te("text")},[(g=l.default)==null?void 0:g.call(l,{active:b.value})])])}}});const Ve=ce(vn),mn={key:0,class:"message-item self"},hn={key:1,class:"message-item other"},bn=Y({__name:"MessageList",props:{messages:{type:Array,required:!0},curConversation:{type:Object,required:!0}},setup(e){const a=et();return(l,s)=>{const r=Qe("el-avatar"),u=Ze("loading");return S(!0),E(Be,null,Xe(e.messages,(h,b)=>(S(),E("div",{key:b},[h.senderId===m(a).userInfo._id?(S(),E("div",mn,[be((S(),E("span",null,[$(ee(h.message),1)])),[[u,h.status==="pending"]]),o(r,{size:45,src:m(a).userInfo.avatar},null,8,["src"]),s[0]||(s[0]=V("div",{class:"triangle-left"},null,-1))])):(S(),E("div",hn,[o(r,{size:45,src:e.curConversation.receiver.avatar},null,8,["src"]),V("span",null,ee(h.message),1),s[1]||(s[1]=V("div",{class:"triangle-right"},null,-1))]))]))),128)}}});const yn=tt(bn,[["__scopeId","data-v-5b9fcdf4"]]),_n={class:"body h-full"},Cn={key:1},kn={key:0,class:"conversation-wrapper"},xn={key:0,"element-loading-background":"transparent",class:"loading"},In={class:"input-area"},wn={key:1,class:"chat-list"},Sn=["onClick"],pn={class:"left"},Tn={key:0,class:"online-status"},Vn={class:"right"},Mn={class:"right-top"},Bn={class:"user-name"},En={class:"last-time"},Ln={class:"last-message"},Rn={key:2,class:"h-[calc(100vh-70px)] overflow-auto pb-[30px]"},Pn={class:"flex flex-col items-center gap-4"},An={class:"relative"},$n=Y({__name:"MobileChat",setup(e){const a=k(0);let l=null;const s=et(),r=k([]),u=k(0),h=F(()=>{var i,n;return(i=s.userInfo)!=null&&i.valid_date?le.leftDays((n=s.userInfo)==null?void 0:n.valid_date):0});Ye(()=>{s.notify=0;const i=s.userInfo._id;l=ht(`https://admin.dianlvtong.xyz?userId=${i}`),l.on("connect",()=>{console.log("connected")}),l.on("get-online-users",n=>{console.log("online users",n),r.value=n}),l.on("user-connected",n=>{console.log(`${n} connected`)}),l.on("new-message",n=>{u.value++,le.playSound(le.SOUND.NEW_MESSAGE),x(n),D.value&&(I.value.unshift(n),j())}),l.on("online-client",n=>{console.log("online-client:",n)}),l.on("call-made",({callerId:n,callerName:R,callerAvatar:fe,type:ae})=>{}),l.on("call-canceled",({callerId:n,callerName:R})=>{console.log("call-canceled",n,R)}),l.on("answer-made",({callerId:n,answerType:R})=>{console.log("answer-made",n,R)}),l.on("call-ended",({calleeId:n})=>{console.log("call-ended",n)})}),ft(()=>{var i;l.connected&&l.disconnect(),(i=D.value)==null||i.removeEventListener("scroll",L)});const b=()=>{a.value=0},d=k([]),v=k();async function g(){const i=await oe.sendRequest("GetConversationList",{});i.list.length&&(d.value=i.list)}const x=i=>{const n=d.value.find(R=>R._id===i.conversationId);n&&n.messages.push(i)},M=async i=>{B.value=!1,y.value=0,I.value=[],v.value=i,p=i.receiver._id,await J(),j(),Z(()=>{var n;(n=D.value)==null||n.addEventListener("scroll",L)})},L=i=>{i.target.scrollHeight+i.target.scrollTop==D.value.offsetHeight&&J()},I=k([]),C=k(!1),y=k(0),B=k(!1);let p="6476c32c70096c992044bf92";const J=async()=>{if(B.value)return;C.value=!0,y.value++;const i={page:y.value,id:p},n=await oe.sendRequest("GetConversationMessageList",i);n.messages.length<10&&(B.value=!0),I.value=[...I.value,...n.messages],C.value=!1},z=k(!1),N=k(""),ne=async()=>{if(N.value=="")return;const i={message:N.value,receiver_id:p},n=k({message:N.value,create_time:new Date().getTime(),senderId:s.userInfo._id,receiverId:p,status:"pending"});I.value.unshift(n.value),await oe.sendRequest("CreateConversation",i,null,null)?n.value.status="success":n.value.status="failed",N.value="",j()},D=k(),j=()=>{D.value&&Z(()=>{D.value.scrollTop=D.value.scrollHeight})},_e=async()=>{await oe.sendRequest("SendNotify")&&(De("已发送通知，请稍后刷新"),s.notify=1)},Ce=()=>{navigator.clipboard.writeText(s.userInfo.key),De("已复制密钥")};async function ue(){const i=await oe.sendRequest("GetCurrent"),n={id:i.id,_id:i._id,nickname:i.nickname||i.name,avatar:i.avatar,intro:i.intro,tags:i.tags,role_id:i.role_id,key:i.key,valid_date:i.valid_date};s.setUserInfo(n)}const ke=gt(),xe=vt(),Ie=()=>{mt("token"),s.logout(),ke.dispatch("closeAll"),xe.replace({name:"Login"})},de=()=>{a.value==1&&(u.value=0,v.value=null,g())};return(i,n)=>{var ae,ge;const R=Qe("el-avatar"),fe=Ze("loading");return S(),E(Be,null,[V("div",_n,[a.value==0?(S(),Pe(bt,{key:0,class:"h-[calc(100vh-70px)] overflow-auto"})):X("",!0),a.value==1?(S(),E("div",Cn,[v.value?(S(),E("div",kn,[o(m(Oe),{title:`与 ${v.value.receiver.nickname} 聊天`,"left-text":"返回","left-arrow":"",onClickLeft:b,"safe-area-inset-top":"",fixed:""},null,8,["title"]),V("div",{class:"content-list",ref_key:"contentListRef",ref:D},[z.value?be((S(),E("div",xn,null,512)),[[fe,z.value]]):X("",!0),o(yn,{messages:I.value,curConversation:v.value},null,8,["messages","curConversation"])],512),V("div",In,[o(m(Dt),{inset:"",style:{flex:"1"}},{default:P(()=>[o(m(je),{modelValue:N.value,"onUpdate:modelValue":n[0]||(n[0]=T=>N.value=T),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),o(m(Q),{loading:z.value,size:"normal",color:"linear-gradient(to right, #ff6034, #ee0a24)",onClick:ne},{default:P(()=>n[4]||(n[4]=[$(" 发送 ")])),_:1},8,["loading"])])])):(S(),E("div",wn,[o(m(Oe),{title:"好友列表","left-text":"返回","left-arrow":"",onClickLeft:b,"safe-area-inset-top":"",fixed:""}),(S(!0),E(Be,null,Xe(d.value,(T,we)=>{var ve,me;return S(),E("div",{key:we,class:"chat-item",onClick:Le=>M(T)},[V("div",pn,[o(R,{size:50,src:T.receiver.avatar},null,8,["src"]),r.value.includes(T.receiver._id)?(S(),E("div",Tn)):X("",!0)]),V("div",Vn,[V("div",Mn,[V("div",Bn,ee(T.receiver.name),1),V("div",En,ee(m(le).formatChatTime((ve=T.messages[0])==null?void 0:ve.create_time)),1)]),V("p",Ln,ee((me=T.messages.at(-1))==null?void 0:me.message),1)])],8,Sn)}),128))]))])):X("",!0),a.value==2?(S(),E("div",Rn,[V("div",Pn,[o(m(rn),{"left-icon":"volume-o",speed:"50",scrollable:"",text:"测试密钥限制流量使用，扫码购买后点通知收款，客服发放vip密钥。",class:"w-full"}),V("div",An,[n[6]||(n[6]=V("img",{src:"https://admin.dianlvtong.xyz/static/image/1751339255923-778746750.jpeg",alt:"",class:"w-[200px]"},null,-1)),o(m(Q),{type:"warning",size:"small",onClick:n[1]||(n[1]=T=>m(le).downloadImage("https://admin.dianlvtong.xyz/static/image/1751339255923-778746750.jpeg")),class:"absolute bottom-[50px] left-[calc(50%-38px)] z-10"},{default:P(()=>n[5]||(n[5]=[$(" 保存到相册 ")])),_:1})]),o(m(Q),{type:"success",hairline:"",size:"large",class:"w-[280px]",onClick:_e,disabled:!!m(s).notify},{default:P(()=>n[7]||(n[7]=[$(" 通知收款 ")])),_:1},8,["disabled"]),o(m(Q),{type:"success",hairline:"",size:"large",class:"w-[280px]",onClick:ue},{default:P(()=>n[8]||(n[8]=[$("刷新")])),_:1}),(ae=m(s).userInfo)!=null&&ae.valid_date?(S(),Pe(m(an),{key:0,type:"warning",size:"large",color:"#7232dd",plain:""},{default:P(()=>[$(" 套餐剩余时长："+ee(h.value)+" 天 ",1)]),_:1})):X("",!0),o(m(je),{modelValue:m(s).userInfo.key,"onUpdate:modelValue":n[2]||(n[2]=T=>m(s).userInfo.key=T),autosize:"",label:m(s).userInfo.valid_date?"vip密钥":"测试密钥",type:"textarea",placeholder:""},null,8,["modelValue","label"]),o(m(Q),{type:"success",hairline:"",size:"large",class:"w-[280px]",disabled:!((ge=m(s).userInfo)!=null&&ge.key),onClick:Ce},{default:P(()=>n[9]||(n[9]=[$(" 复制到剪切板 ")])),_:1},8,["disabled"]),o(m(Q),{type:"success",hairline:"",size:"large",class:"w-[280px]",onClick:Ie},{default:P(()=>n[10]||(n[10]=[$("退出登录")])),_:1})])])):X("",!0)]),be(o(m(dn),{modelValue:a.value,"onUpdate:modelValue":n[3]||(n[3]=T=>a.value=T),fixed:"",onChange:de},{default:P(()=>[o(m(Ve),{icon:"home-o"},{default:P(()=>n[11]||(n[11]=[$("使用教程")])),_:1}),o(m(Ve),{icon:"chat-o",badge:u.value},{default:P(()=>n[12]||(n[12]=[$("咨询客服")])),_:1},8,["badge"]),o(m(Ve),{icon:"contact-o"},{default:P(()=>n[13]||(n[13]=[$("我的")])),_:1})]),_:1},8,["modelValue"]),[[Je,a.value!==1]])],64)}}});const zn=tt($n,[["__scopeId","data-v-54dd925d"]]),Un=Object.freeze(Object.defineProperty({__proto__:null,default:zn},Symbol.toStringTag,{value:"Module"}));export{yn as M,zn as a,Un as b};
