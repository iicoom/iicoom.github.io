import{o as n}from"./index-a763790d.js";import{a7 as r}from"./element-plus-b1d7f0ee.js";const d="http://localhost:3000/",i={400:"客户端请求的语法错误，服务器无法理解。",401:"用户没有权限。",403:"用户得到授权，但是访问是被禁止的。",404:"发出的请求是不存在的记录，服务器没有进行操作。",406:"请求的格式有误，无法接受。",410:"请求的资源被永久删除，且不会再得到。",500:"服务器内部错误，无法完成请求。",502:"网关错误。",503:"服务不可用，服务器暂时过载或维护。",504:"网关超时。"},o=n.create({baseURL:d,timeout:3e4,withCredentials:!1}),s={duration:2e3};o.interceptors.request.use(t=>{const e="",a="";return t.headers={...t.headers,Authorization:a,appToken:e},t},t=>Promise.reject(t));o.interceptors.response.use(async t=>{if((t==null?void 0:t.status)==200||(t==null?void 0:t.status)==201||t.data.code==="200")return t;const{msg:e}=t.data;if(["401"].includes(t.data.code))console.log("????",t.data),r.error({message:e,duration:s.duration});else if(["1003","1004"].includes(t.data.code))console.log("????",t.data),r.error({message:e,duration:s.duration});else return e&&r.error({message:e,duration:s.duration}),Promise.reject(t.data)},t=>{console.log(t);const e=t.config;if(t.message==="Network Error")r.error({message:"网络不可用，请检查网络！！！",duration:s.duration});else if(t.code==="ECONNABORTED"&&t.message.indexOf("timeout")!==-1&&!e._retry)r.error({message:"请求超时，请稍后重试！！！",duration:s.duration});else{const a=i[t.response.status]||t.response.statusText;r.error({message:a,duration:s.duration})}return Promise.reject(t)});const l={get:(t,e)=>o.get(t,{params:e}).then(a=>a.data),post:(t,e)=>o.post(t,e).then(a=>a.data),put:(t,e)=>o.put(t,e).then(a=>a.data),delete:(t,e)=>o.delete(t,e).then(a=>a.data),download:(t,e)=>o.post(t,e,{responseType:"blob"}).then(a=>a.data),downloadGet:(t,e)=>o.get(t,{params:e,responseType:"blob"}).then(a=>a.data)};export{l as r};
