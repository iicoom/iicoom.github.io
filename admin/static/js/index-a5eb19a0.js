import{a as q,G as z,_ as E}from"./index-a763790d.js";import{d as M,k as I,r as k,z as n,D as y,E as g,f as V,B as u,v as j,A as s,S as i,ak as J,C as r,F as T,G as C,a5 as F,L as x}from"./element-plus-b1d7f0ee.js";const K={class:"search-container"},O={class:"left-table-filter"},Q={class:"right-btn"},W=M({__name:"index",props:{formFields:{require:!0,type:Array,default:()=>[]}},emits:["tableReset","tableFilter","pickerChange"],setup(U,{expose:w,emit:D}){const f=D,B=q(),h=U,d=I({startTime:"",timestamp:""}),a=k({}),_=k(),G=l=>d.startTime&&(l.getTime()<d.startTime-24*3600*1e3-26784e5||l.getTime()>d.startTime-24*3600*1e3+26784e5)||l.getTime()>Date.now(),R=([l,o])=>{d.startTime="",d.startTime=l.getTime(),f("pickerChange",[l,o])},S=l=>{var m;let o="",c="";l?(o=l[0],c=l[1]):d.startTime="",c=c.replace("00:00:00","23:59:59");const p=(m=h.formFields.find(b=>["year","month","datetime","daterange"].includes(b.type)))==null?void 0:m.field;p&&(a.value[p]=[o,c])},N=l=>{},P=(l,o)=>{console.log(l,o)},Y=()=>{_.value&&(_.value.resetFields(),B.push({query:{}}),f("tableReset",{...a.value}))},A=()=>{f("tableFilter",{...a.value})};return w({formFieldsValue:a}),(l,o)=>{const c=r("el-input"),p=r("el-option"),m=r("el-select"),b=r("el-tree-select"),H=r("el-date-picker"),L=r("el-form-item"),$=r("el-form"),v=r("el-button");return n(),y("div",K,[g("div",O,[V($,{ref_key:"formRef",ref:_,inline:!0,model:a.value},{default:u(()=>[(n(!0),y(T,null,C(h.formFields,e=>(n(),s(L,{key:e.field,prop:e.field,label:e.label},{default:u(()=>[e.type=="input"?(n(),s(c,{key:0,modelValue:a.value[e.field],"onUpdate:modelValue":t=>a.value[e.field]=t,style:F({width:`${e.width||"220px"}`}),clearable:e.clearable??!0,placeholder:e.placeholder?e.placeholder:"请输入内容"},null,8,["modelValue","onUpdate:modelValue","style","clearable","placeholder"])):i("",!0),e.type=="select"?(n(),s(m,{key:1,modelValue:a.value[e.field],"onUpdate:modelValue":t=>a.value[e.field]=t,filterable:e.filterable??!0,clearable:e.clearable??!0,multiple:e.multiple??!1,onChange:t=>P(t,e),placeholder:e.placeholder?e.placeholder:"请选择",style:F({width:`${e.width||"220px"}`})},{default:u(()=>[(n(!0),y(T,null,C(e.options,t=>(n(),s(p,{key:t[e.optionValue||"value"],label:t[e.optionLabel||"label"],value:t[e.optionValue||"value"]},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","filterable","clearable","multiple","onChange","placeholder","style"])):i("",!0),e.type=="cascader"?(n(),s(b,{key:2,modelValue:a.value[e.field],"onUpdate:modelValue":t=>a.value[e.field]=t,data:e.options,"check-strictly":e.checkStrictly,"render-after-expand":!1,filterable:"",clearable:""},null,8,["modelValue","onUpdate:modelValue","data","check-strictly"])):i("",!0),["year","month","datetime","daterange","datetimerange"].includes(e.type)?(n(),s(H,{key:3,modelValue:a.value[e.field],"onUpdate:modelValue":t=>a.value[e.field]=t,clearable:"",type:e.type,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD HH:mm:ss","unlink-panels":"","disabled-date":e.disabledDate||G,onCalendarChange:R,onChange:S,onPanelChange:N},null,8,["modelValue","onUpdate:modelValue","type","disabled-date"])):i("",!0)]),_:2},1032,["prop","label"]))),128))]),_:1},8,["model"])]),g("div",Q,[V(v,{type:"primary",onClick:A},{default:u(()=>o[0]||(o[0]=[x("查询")])),_:1}),j(z).getPlatform()==="pc"?(n(),s(v,{key:0,plain:"",onClick:Y},{default:u(()=>o[1]||(o[1]=[x("重置")])),_:1})):i("",!0),J(l.$slots,"btnAction",{},void 0,!0)])])}}});const ee=E(W,[["__scopeId","data-v-5295d3d8"]]);export{ee as G};
