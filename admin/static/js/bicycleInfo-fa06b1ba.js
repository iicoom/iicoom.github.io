import{$ as k,u as h,a as L,n as M}from"./index-a9d270ce.js";import{_ as S}from"./AiEditor.vue_vue_type_script_setup_true_lang-95ba90b7.js";import{P as T}from"./PicUpload-df31bba0.js";import{d as j,o as D,r as c,k as C,q as O,z as d,D as m,E as A,f as l,B as s,v as r,a7 as H,C as p,L as R,F as B,G as x}from"./element-plus-40d2da59.js";import"./echarts-71ab4440.js";const J={class:"page-info"},ee=j({__name:"bicycleInfo",setup(K){const U=[{label:"价格实惠",value:1},{label:"续航持久",value:2},{label:"外观哇塞",value:3},{label:"售后保障",value:4}],q=[{label:"电动自行车",value:1},{label:"电池",value:2}],f=h(),w=L(),F=M();D(()=>{const a=f.params.id;a!=="0"&&G(a)});const _=c();let t=C({id:"",title:"",pic:"",price:void 0,content:"",tags:[],type:1,merchant:"",address:""});const E=C({title:[{required:!0,message:"请输入"}],content:[{required:!0,message:"请输入"}]}),b=c(),y=c(),P=(a,e)=>{console.log("setPic",a,e),t.pic=a},z=a=>{t.content=a};async function G(a){const e={id:a},u=await k.sendRequest("GetBicycleInfo",e);Object.keys(u.info).forEach(i=>{t[i]=u.info[i]}),O(()=>{var i,n;u.info.pic&&((i=b.value)==null||i.init(u.info.pic)),u.info.content&&((n=y.value)==null||n.setContent(u.info.content))})}async function I(){var a;(a=_.value)==null||a.validate(async(e,u)=>{if(e){let i="CreateBicycle";t._id&&(i="UpdateBicycle");const n={...t};await k.sendRequest(i,n)&&H({message:"操作成功",type:"success"})}})}const N=()=>{w.back(),F.dispatch("closeCur",f.name)};return(a,e)=>{const u=p("el-button"),i=p("el-input"),n=p("el-form-item"),v=p("el-input-number"),V=p("el-option"),g=p("el-select"),$=p("el-form");return d(),m("div",J,[A("div",null,[l(u,{type:"primary",size:"small",onClick:I},{default:s(()=>e[6]||(e[6]=[R("保存")])),_:1}),l(u,{size:"small",onClick:N},{default:s(()=>e[7]||(e[7]=[R("返回")])),_:1})]),l($,{model:r(t),ref_key:"bicycleFormRef",ref:_,style:{"margin-top":"20px","max-width":"600px"},rules:E,"label-width":"auto"},{default:s(()=>[l(n,{label:"品牌名称",prop:"title"},{default:s(()=>[l(i,{placeholder:"",modelValue:r(t).title,"onUpdate:modelValue":e[0]||(e[0]=o=>r(t).title=o),clearable:""},null,8,["modelValue"])]),_:1}),l(n,{label:"价格",prop:"price"},{default:s(()=>[l(v,{modelValue:r(t).price,"onUpdate:modelValue":e[1]||(e[1]=o=>r(t).price=o),precision:2,step:.1,min:0,"controls-position":"right"},null,8,["modelValue"])]),_:1}),l(n,{label:"图片",prop:"pic"},{default:s(()=>[l(T,{ref_key:"picRef",ref:b,sign:"pic",onResult:P},null,512)]),_:1}),l(n,{label:"标签",prop:"tags"},{default:s(()=>[l(g,{modelValue:r(t).tags,"onUpdate:modelValue":e[2]||(e[2]=o=>r(t).tags=o),clearable:"",multiple:"",placeholder:""},{default:s(()=>[(d(),m(B,null,x(U,o=>l(V,{label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"产品类型",prop:"type"},{default:s(()=>[l(g,{modelValue:r(t).type,"onUpdate:modelValue":e[3]||(e[3]=o=>r(t).type=o),clearable:"",placeholder:""},{default:s(()=>[(d(),m(B,null,x(q,o=>l(V,{key:o.type,label:o.label,value:o.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"商家名称",prop:"merchant"},{default:s(()=>[l(i,{placeholder:"",modelValue:r(t).merchant,"onUpdate:modelValue":e[4]||(e[4]=o=>r(t).merchant=o),clearable:""},null,8,["modelValue"])]),_:1}),l(n,{label:"商家地址",prop:"address"},{default:s(()=>[l(i,{placeholder:"latitude,longitude",modelValue:r(t).address,"onUpdate:modelValue":e[5]||(e[5]=o=>r(t).address=o),clearable:""},null,8,["modelValue"])]),_:1}),l(n,{label:"详情",prop:"content"},{default:s(()=>[l(S,{ref_key:"contentRef",ref:y,onChange:z},null,512)]),_:1})]),_:1},8,["model","rules"])])}}});export{ee as default};
