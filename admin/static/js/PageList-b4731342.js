import{$ as h,a as P,G as _}from"./index-a9d270ce.js";import{G as D}from"./index-ed9aaca8.js";import{G as z}from"./index-4972ca34.js";import{k as w,d as B,r as c,o as G,z as S,D as $,E as R,f as l,v as s,B as o,C as F,L as n,as as q,J as b,ap as E,a7 as v}from"./element-plus-40d2da59.js";import{r as L}from"./request-980f8d29.js";import"./echarts-71ab4440.js";const V=w([{label:"ID",prop:"_id",width:"150px",align:"center"},{label:"页面名称",prop:"name"},{label:"页面类型",prop:"type",tdSlot:"type",width:"280px"},{label:"创建人",prop:"creator",width:"280px"},{label:"创建时间",prop:"create_time",tdSlot:"createTime",width:"200px",align:"center"},{label:"更新时间",prop:"update_time",tdSlot:"updateTime",width:"200px",align:"center"},{label:"操作",prop:"operate",tdSlot:"operate",align:"center",fixed:"right"}]),M=w([{field:"name",type:"input",label:"页面名称"}]),N={class:"page-container"},I={class:"tool-bar"},U=B({__name:"PageList",setup(J){const u=c(),i=c();G(()=>{r()});function f(){i.value.pagination.page=1,r()}const g=c([]),d=c(!1);async function r(){d.value=!0;const a={...u.value.formFieldsValue,page:i.value.pagination.page,size:i.value.pagination.size},e=await h.sendRequest("GetPageList",a);g.value=e.list,i.value.pagination.total=e.total,d.value=!1}const m=P(),x=()=>{m.push({name:"PageDetail"})},C=a=>{m.push({name:"PageDetail",query:{id:a.id}})},T=a=>{m.push({name:"PageDetail",query:{id:a.id,copy:1}})},k=a=>{E.confirm(`确定要删除 【${a.name}】页面？`,"Tips",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{await L.delete(`/page/${a.id}`),v.success("删除成功"),r()}).catch(e=>{console.error(e),v({type:"info",message:"取消删除"})})};return(a,e)=>{const p=F("el-button");return S(),$("div",N,[R("div",I,[l(z,{ref_key:"gtfRef",ref:u,"form-fields":s(M),onTableFilter:f},null,8,["form-fields"]),l(p,{type:"primary",icon:s(q),onClick:x},{default:o(()=>e[0]||(e[0]=[n("新增")])),_:1},8,["icon"])]),l(D,{ref_key:"gtRef",ref:i,loading:d.value,columns:s(V),tableData:g.value,onPageChange:r,onSizeChange:f},{createTime:o(t=>[n(b(s(_).formatTime(t.row.create_time)),1)]),updateTime:o(t=>[n(b(s(_).formatTime(t.row.update_time)),1)]),operate:o(t=>[l(p,{size:"small",type:"primary",onClick:y=>C(t.row)},{default:o(()=>e[1]||(e[1]=[n("编辑")])),_:2},1032,["onClick"]),l(p,{size:"small",type:"primary",onClick:y=>T(t.row)},{default:o(()=>e[2]||(e[2]=[n("复制")])),_:2},1032,["onClick"]),l(p,{size:"small",type:"danger",onClick:y=>k(t.row)},{default:o(()=>e[3]||(e[3]=[n("删除")])),_:2},1032,["onClick"])]),_:1},8,["loading","columns","tableData"])])}}});export{U as default};
